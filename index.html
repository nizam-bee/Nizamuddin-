// File: Results.jsx import React, { useEffect, useState } from 'react'; import { useSearchParams } from 'react-router-dom'; import axios from 'axios';

const Results = () => { const [params] = useSearchParams(); const query = params.get('q'); const [aiAnswer, setAiAnswer] = useState(''); const [news, setNews] = useState([]); const [images, setImages] = useState([]); const [loading, setLoading] = useState(true);

useEffect(() => { const fetchData = async () => { setLoading(true); try { const aiRes = await axios.post( 'https://api.openai.com/v1/chat/completions', { model: 'gpt-4', messages: [{ role: 'user', content: query }], }, { headers: { Authorization: Bearer YOUR_OPENAI_KEY, }, } ); setAiAnswer(aiRes.data.choices[0].message.content);

const newsRes = await axios.get(
      `https://newsapi.org/v2/everything?q=${query}&apiKey=03c7f04c16124494b98a5bd26eced2cf`
    );
    setNews(newsRes.data.articles.slice(0, 4));

    const imgRes = await axios.get(
      `https://api.unsplash.com/search/photos?page=1&query=${query}&client_id=YOUR_UNSPLASH_KEY`
    );
    setImages(imgRes.data.results);

  } catch (error) {
    console.error(error);
  }
  setLoading(false);
};
fetchData();

}, [query]);

return ( <div className="max-w-4xl mx-auto p-4"> <h2 className="text-sm text-gray-600 mb-2">Showing results for "{query}" in 0.41 seconds</h2>

{loading && <p>Loading...</p>}

  {!loading && aiAnswer && (
    <div className="mb-6">
      <h3 className="font-semibold text-lg mb-2">AI Answer</h3>
      <p className="bg-gray-100 p-4 rounded whitespace-pre-wrap">{aiAnswer}</p>
    </div>
  )}

  {!loading && news.length > 0 && (
    <div className="mb-6">
      <h3 className="font-semibold text-lg mb-2">News</h3>
      <div className="grid gap-4">
        {news.map((n, idx) => (
          <a href={n.url} key={idx} className="block border p-3 rounded hover:bg-gray-50">
            {n.urlToImage && <img src={n.urlToImage} className="w-full h-48 object-cover rounded mb-2" alt="news" />}
            <h4 className="font-bold text-md">{n.title}</h4>
            <p className="text-sm text-gray-600">{n.description}</p>
          </a>
        ))}
      </div>
    </div>
  )}

  {!loading && images.length > 0 && (
    <div>
      <h3 className="font-semibold text-lg mb-2">Images</h3>
      <div className="grid grid-cols-2 gap-4">
        {images.map((img, idx) => (
          <img key={idx} src={img.urls.small} className="rounded shadow" alt="result" />
        ))}
      </div>
    </div>
  )}
</div>

); };

export defa
ult Results;
