<script>
  async function searchNow() {
    const query = document.getElementById('searchInput').value.trim();
    if (!query) return alert("Please enter a search query");

    const aiAnswerDiv = document.createElement('div');
    aiAnswerDiv.className = "news-item";
    aiAnswerDiv.innerHTML = `<strong>AI Answer:</strong> Searching for "${query}"...`;
    document.querySelector(".news-section").prepend(aiAnswerDiv);

    try {
      // Simple AI logic simulation
      let result;
      if (query.toLowerCase().includes("code") || query.toLowerCase().includes("how to")) {
        result = "Sure! Here is some example code:\n\n```python\nprint('Hello from n.ai.in!')\n```";
      } else {
        // Fallback to Bing preview
        result = `You can view results for <strong>"${query}"</strong> <a href="https://www.bing.com/search?q=${encodeURIComponent(query)}" target="_blank">here</a>.`;
      }

      aiAnswerDiv.innerHTML = `<strong>AI Answer:</strong><br>${result}`;
    } catch (e) {
      aiAnswerDiv.innerHTML = `<strong>AI Answer:</strong> Sorry, something went wrong. Try again.`;
    }
  }

  function openLogin() {
    document.getElementById("loginModal").style.display = "flex";
  }

  function closeLogin() {
    document.getElementById("loginModal").style.display = "none";
    alert("Logged in successfully to n.ai.in");
  }

  // Optional voice search (basic)
  document.querySelector(".voice-icon").onclick = function() {
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = 'en-US';
    recognition.start();

    recognition.onresult = function(event) {
      document.getElementById("searchInput").value = event.results[0][0].transcript;
      searchNow();
    };
  };
</script>
